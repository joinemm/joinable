<!DOCTYPE html>
<head>

</head>
<body>
    <h3>Welcome to <del>Streamable.com</del> Joinable.xyz</h3>
<form id="uploadForm">
    <p>Select image to upload:</p>
    <input type="file" name="fileToUpload" id="fileToUpload" accept="audio/*|video/*|image/*" required/>
    <input type="submit" value="Upload" name="submit"/>
    <p id="responseLabel"></p>
</form>
<script>
        const uploadForm = document.getElementById("uploadForm");
        uploadForm.addEventListener('submit', function(e) {
            e.preventDefault()
            let file = e.target.fileToUpload.files[0]
            let formData = new FormData()
            formData.append('file', file)

            fetch('upload', {
                method: 'POST',
                body: formData
            })
            .then(response => response.text())
            .then(data => {
                console.log(data);
                document.getElementById("responseLabel").innerHTML = data;
                e.target.fileToUpload.value = '';
            });
        })
    </script>
</body>
</html>